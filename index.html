<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bettiah Interactive Map - Leaflet & OpenStreetMap</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css" />
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f0f0; }
    #map { height: 100vh; width: 100%; position: relative; }
    .panel { position: fixed; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.15); z-index: 1000; transition: all 0.3s ease; }
    .control-panel { top: 10px; left: 10px; max-width: 350px; max-height: 90vh; overflow-y: auto; }
    .control-panel.collapsed { max-width: 50px; max-height: auto; }
    .control-panel.collapsed .control-content { display: none; }
    .control-panel.collapsed h1 { font-size: 12px; margin: 0; writing-mode: vertical-rl; text-orientation: mixed; }
    .info-box { bottom: 20px; right: 20px; max-width: 300px; }
    .info-box.collapsed { max-width: 50px; max-height: auto; }
    .info-box.collapsed .info-content { display: none; }
    .info-box.collapsed .title { font-size: 12px; margin: 0; writing-mode: vertical-rl; text-orientation: mixed; }
    .panel h1 { color: #2c3e50; font-size: 20px; margin-bottom: 10px; }
    .panel p { color: #666; font-size: 12px; margin: 3px 0; }
    .toggle-btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; margin-left: 5px; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); display: flex; align-items: center; justify-content: center; min-width: 36px; }
    .toggle-btn:hover { background: linear-gradient(135deg, #764ba2 0%, #667eea 100%); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); transform: scale(1.08); }
    .toggle-btn:active { transform: scale(0.95); }
    .search-box { margin-top: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; width: 100%; font-size: 13px; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
    .search-box:focus { outline: none; border-color: #667eea; box-shadow: 0 0 8px rgba(102, 126, 234, 0.4); }
    .filter-section { margin-top: 12px; }
    .filter-title { font-weight: bold; font-size: 12px; color: #2c3e50; margin-bottom: 8px; }
    .filter-section label { display: block; margin: 5px 0; cursor: pointer; font-size: 12px; transition: color 0.2s ease; }
    .filter-section label:hover { color: #667eea; }
    .filter-section input { margin-right: 6px; cursor: pointer; }
    .title { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px; }
    .subtitle { font-size: 13px; color: #666; line-height: 1.4; }
    .panel-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
    .leaflet-tile-pane img { image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="panel control-panel" id="controlPanel">
    <div class="panel-header">
      <h1>Bettiah Map</h1>
      <button class="toggle-btn" onclick="togglePanel('controlPanel')" title="Minimize/Expand">‚ãØ</button>
    </div>
    <div class="control-content">
      <p style="color: #666; font-size: 12px; margin: 8px 0;">üìç West Champaran, Bihar, India</p>
      <input type="text" id="searchBox" class="search-box" placeholder="üîç Search locations...">
      <div class="filter-section">
        <div class="filter-title">üìÅ Filter by Category</div>
        <label><input type="checkbox" class="category-checkbox" value="admin"> Government</label>
        <label><input type="checkbox" class="category-checkbox" value="heritage"> Heritage</label>
        <label><input type="checkbox" class="category-checkbox" value="religious"> Religious</label>
        <label><input type="checkbox" class="category-checkbox" value="nature"> Nature</label>
        <label><input type="checkbox" class="category-checkbox" value="commerce"> Commerce</label>
        <label><input type="checkbox" class="category-checkbox" value="agriculture"> Agriculture</label>
        <label><input type="checkbox" class="category-checkbox" value="education"> Education</label>
        <label><input type="checkbox" class="category-checkbox" value="healthcare"> Healthcare</label>
        <label><input type="checkbox" class="category-checkbox" value="wildlife"> Wildlife</label>
        <label><input type="checkbox" class="category-checkbox" value="infrastructure"> Infrastructure</label>
        <label><input type="checkbox" class="category-checkbox" value="historical"> Historical</label>
        <label><input type="checkbox" class="category-checkbox" value="archaeological"> Archaeological</label>
      </div>
      <div class="filter-section">
        <div class="filter-title">üì° Map Layers</div>
        <label><input type="radio" name="layer" value="osm" checked> Street Map</label>
        <label><input type="radio" name="layer" value="satellite"> Satellite View</label>
      </div>
    </div>
  </div>
  <div class="panel info-box" id="infoBox">
    <div class="panel-header">
      <div class="title">About Bettiah</div>
      <button class="toggle-btn" onclick="togglePanel('infoBox')" title="Minimize/Expand">‚ãØ</button>
    </div>
    <div class="info-content">
      <div class="subtitle">Bettiah is the administrative headquarters of West Champaran district in Bihar. Known for agricultural production, historical heritage, and its role in India's independence movement (Champaran Satyagraha).</div>
    </div>
  </div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
  <script>
    function togglePanel(pid) {
      document.getElementById(pid).classList.toggle('collapsed');
    }

    const map = L.map('map').setView([26.80229, 84.50311], 13);
    
    const osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'OpenStreetMap',
      maxZoom: 19,
      minZoom: 2,
      errorTileUrl: 'data:image/svg+xml;utf8,<svg></svg>'
    });
    
    const satelliteLayer = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Esri',
      maxZoom: 18,
      minZoom: 2
    });
    
    osmLayer.addTo(map);

    document.querySelectorAll('input[name="layer"]').forEach(radio => {
      radio.addEventListener('change', (e) => {
        if (e.target.value === 'satellite') {
          map.removeLayer(osmLayer);
          satelliteLayer.addTo(map);
        } else {
          map.removeLayer(satelliteLayer);
          osmLayer.addTo(map);
        }
      });
    });

    const locations = [
      {name:'Bettiah Town Center',lat:26.80229,lng:84.50311,d:'City Center',icon:'üèõÔ∏è',type:'admin'},
      {name:'Bettiah Raj Palace',lat:26.80456,lng:84.49876,d:'Historic Palace',icon:'üè∞',type:'heritage'},
      {name:'Kali Bagh Temple',lat:26.80789,lng:84.50456,d:'Religious Site',icon:'‚õ™',type:'religious'},
      {name:'District Hospital',lat:26.80012,lng:84.51123,d:'Medical Facility',icon:'üè•',type:'healthcare'},
      {name:'Bettiah Railway Station',lat:26.79567,lng:84.51234,d:'Transport Hub',icon:'üöÇ',type:'infrastructure'},
      {name:'Bettiah Bus Stand',lat:26.80234,lng:84.48956,d:'Bus Terminal',icon:'üöå',type:'infrastructure'},
      {name:'District Collectorate',lat:26.80567,lng:84.50789,d:'Government Office',icon:'üè¢',type:'admin'},
      {name:'MJK College',lat:26.79234,lng:84.49123,d:'Educational Institution',icon:'üéì',type:'education'},
      {name:'Bettiah Market',lat:26.80678,lng:84.50234,d:'Commercial Hub',icon:'üè™',type:'commerce'},
      {name:'Triveni Ghat',lat:26.80123,lng:84.51567,d:'River Confluence',icon:'üíß',type:'nature'},
      {name:'Shahid Smarak',lat:26.81234,lng:84.50678,d:'War Memorial',icon:'üáÆüá≥',type:'heritage'},
      {name:'Police Station',lat:26.80345,lng:84.50567,d:'Law Enforcement',icon:'üëÆ',type:'admin'},
      {name:'Fire Station',lat:26.80456,lng:84.51234,d:'Emergency Services',icon:'üöí',type:'admin'},
      {name:'Post Office',lat:26.80567,lng:84.49876,d:'Postal Services',icon:'üìÆ',type:'admin'},
      {name:'State Bank of India',lat:26.80678,lng:84.50345,d:'Banking',icon:'üè¶',type:'commerce'},
      {name:'Bhitiharwa Ashram',lat:26.79456,lng:84.48765,d:'Historical Ashram',icon:'üôè',type:'heritage'},
      {name:'Community Health Center',lat:26.79234,lng:84.50123,d:'Health Services',icon:'üè•',type:'healthcare'},
      {name:'Government School',lat:26.80012,lng:84.49456,d:'Primary Education',icon:'üéì',type:'education'},
      {name:'Maharani Park',lat:26.81456,lng:84.49876,d:'Public Garden',icon:'üå≥',type:'nature'},
      {name:'Church',lat:26.80789,lng:84.48234,d:'Religious Building',icon:'‚úùÔ∏è',type:'religious'},
      {name:'Masjid',lat:26.79876,lng:84.51456,d:'Islamic Center',icon:'üïå',type:'religious'},
      {name:'Veterinary Hospital',lat:26.81012,lng:84.50234,d:'Animal Care',icon:'üêï',type:'healthcare'},
      {name:'Agriculture Office',lat:26.79567,lng:84.49234,d:'Farming Support',icon:'üåæ',type:'agriculture'},
      {name:'Industrial Area',lat:26.78234,lng:84.51789,d:'Manufacturing Zone',icon:'üè≠',type:'infrastructure'},
      {name:'Shivpur',lat:26.81678,lng:84.50567,d:'Residential Area',icon:'üè†',type:'nature'}
    ];

    let mcg = L.markerClusterGroup({ maxClusterRadius: 60 });
    locations.forEach(loc => {
      const marker = L.marker([loc.lat, loc.lng])
        .bindPopup(`<div style='width:250px;font-size:12px'><h3 style='color:#2c3e50'>${loc.icon} ${loc.name}</h3><p>${loc.d}</p><p><b>Type:</b> ${loc.type}</p></div>`)
        .on('mouseover', function() { this.openPopup(); })
        .on('mouseout', function() { this.closePopup(); });
      mcg.addLayer(marker);
    });
    map.addLayer(mcg);

    L.circle([26.80229, 84.50311], {
      color: '#3498db',
      fillColor: '#3498db',
      fillOpacity: 0.1,
      radius: 5000,
      weight: 2
    }).addTo(map);

    const searchBox = document.getElementById('searchBox');
    const categoryCheckboxes = document.querySelectorAll('.category-checkbox');

    function filterMarkers() {
      const searchTerm = searchBox.value.toLowerCase();
      const selectedCategories = Array.from(categoryCheckboxes)
        .filter(cb => cb.checked)
        .map(cb => cb.value);

      mcg.clearLayers();

      locations.forEach(loc => {
        const matchesSearch = loc.name.toLowerCase().includes(searchTerm) || loc.d.toLowerCase().includes(searchTerm);
        const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(loc.type);

        if (matchesSearch && matchesCategory) {
          mcg.addLayer(
            L.marker([loc.lat, loc.lng])
              .bindPopup(`<div style='width:250px;font-size:12px'><h3 style='color:#2c3e50'>${loc.icon} ${loc.name}</h3><p>${loc.d}</p></div>`)
              .on('mouseover', function() { this.openPopup(); })
              .on('mouseout', function() { this.closePopup(); })
          );
        }
      });
    }

    searchBox.addEventListener('input', filterMarkers);
    categoryCheckboxes.forEach(cb => {
      cb.addEventListener('change', filterMarkers);
    });

    window.addEventListener('resize', () => {
      map.invalidateSize();
    });
  </script>
</body>
</html>
